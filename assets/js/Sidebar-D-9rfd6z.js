import{d as e,e as a,l as t,f as l,m as u,c as s,o as n,i as o,g as v,x as i,w as c,T as r,H as d,a as m,F as h,j as g,s as p,t as w,n as b,q as f}from"./vue-vendor-BSHCzLdv.js";import{_ as y}from"./index-CmYh-SVC.js";import"./icons-fa-BP-bSxbT.js";const k=["aria-label"],T={class:"category-list"},E=["onClick"],L={class:"category-name"},x={class:"site-count"},C=y(e({__name:"Sidebar",props:{categories:{}},setup(e){const y=a(!1),C=a(!1),M=a(!1),_=a(0),j=a(0),X=a(!1),W=a(0),q=()=>{C.value=window.innerWidth<768},z=t(()=>window.innerWidth>=768&&window.innerWidth<1024),A=()=>{C.value||z.value||(M.value=!0)},I=()=>{C.value||z.value?C.value&&(y.value=!1):M.value=!1},S=e=>{z.value&&e.touches&&e.touches[0]&&(_.value=e.touches[0].clientX,j.value=e.touches[0].clientY,X.value=!0,W.value=0)},Y=e=>{if(z.value&&X.value&&e.touches&&e.touches[0]){e.preventDefault();const a=e.touches[0].clientX-_.value;y.value?a<0&&(W.value=Math.max(a,-300)):a>0&&_.value<100&&(W.value=Math.min(a,300))}},D=e=>{if(z.value&&X.value&&e.changedTouches&&e.changedTouches[0]){const a=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,l=a-_.value,u=Math.abs(j.value-t);X.value=!1,y.value?_.value-a>80&&u<100?(y.value=!1,W.value=0):W.value=0:l>100&&u<100&&_.value<100?(y.value=!0,W.value=0):W.value=0}},F=e=>{z.value&&e.target===e.currentTarget&&(M.value=!1)},H=()=>{y.value=!y.value},V=()=>{y.value=!1},$=((e,a)=>{let t=null;return(...l)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{e(...l)},a)}})(()=>{q(),C.value||(y.value=!1,M.value=!1)},200);return l(()=>{q(),window.addEventListener("resize",$),document.addEventListener("touchstart",S,{passive:!1}),document.addEventListener("touchmove",Y,{passive:!1}),document.addEventListener("touchend",D,{passive:!1})}),u(()=>{window.removeEventListener("resize",$),document.removeEventListener("touchstart",S),document.removeEventListener("touchmove",Y),document.removeEventListener("touchend",D)}),(a,t)=>(n(),s("div",null,[C.value||z.value?o("",!0):(n(),s("div",{key:0,class:"sidebar-trigger-area",onMouseenter:A},null,32)),z.value?(n(),s("div",{key:1,class:"sidebar-trigger-area",onClick:H})):o("",!0),C.value?(n(),s("button",{key:2,class:"mobile-menu-button",onClick:H,"aria-label":y.value?"关闭菜单":"打开菜单"}," ☰ ",8,k)):o("",!0),v(r,{name:"slide"},{default:c(()=>[C.value&&y.value?(n(),s("div",{key:0,class:"sidebar-overlay",onClick:V})):o("",!0)]),_:1}),i(m("nav",{class:f(["sidebar",{"is-expanded":M.value||C.value&&y.value||z.value&&y.value}]),style:b({transform:z.value&&X.value?`translateX(${W.value}px)`:""}),onMouseenter:A,onMouseleave:I,onClick:F,onTouchstart:S,onTouchmove:Y,onTouchend:D},[m("ul",T,[(n(!0),s(h,null,g(e.categories,(e,a)=>(n(),s("li",{key:a,class:"category-item",onClick:p(a=>(e=>{const a=document.querySelectorAll(".category-title"),t=Array.from(a).find(a=>a.textContent?.trim()===e);t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{V()},300))})(e.name),["stop"])},[m("span",L,w(e.name),1),m("span",x,w(e.sites.length),1)],8,E))),128))])],38),[[d,!C.value||y.value||z.value&&X.value]])]))}}),[["__scopeId","data-v-c5ef6203"]]);export{C as default};
