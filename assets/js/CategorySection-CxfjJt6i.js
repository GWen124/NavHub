const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CmYh-SVC.js","./vue-vendor-BSHCzLdv.js","./icons-fa-BP-bSxbT.js","../css/index-CuVfGVAG.css"])))=>i.map(i=>d[i]);
import{Z as a,M as e,C as t,b as s,H as o,c as n,d as i,F as c,U as r,N as l,I as u,e as d,P as h,f,T as m,g as v,h as g,i as y,j as p,k as I,Y as b,l as k,R as w,m as W,L as C,n as M,o as j,p as D,q as S,r as P,s as B,t as _,u as z,v as A,w as G,x,S as N,a as E,D as F,W as Z,B as L,G as J}from"./icons-fa-BP-bSxbT.js";import{d as $,G as H,e as Q,l as R,f as q,c as T,o as U,n as Y,t as O,a as X,k as K,F as V,v as aa,q as ea,j as ta}from"./vue-vendor-BSHCzLdv.js";import{_ as sa,a as oa}from"./index-CmYh-SVC.js";const na={Google:J,Bold:L,Windows:Z,Dochub:F,Github:E,StackOverflow:N,Figma:x,StickyNote:G,Briefcase:A,Markdown:z,Image:_,Images:B,Blog:P,Code:S,Search:D,Users:j,Twitter:M,Linkedin:C,Discord:W,Reddit:w,PlayCircle:k,Youtube:b,Film:I,Spotify:p,Steam:y,Newspaper:g,Globe:v,Tv:m,Microchip:f,Paperclip:h,Clock:d,Icons:u,NetworkWired:l,Unlock:r,FileExport:c,Server:i,Signal:n,Home:o,GithubSquare:s,Compass:t,MediumM:e,Zhihu:a};function ia(a){return function(a){const e=na[a];return e||console.warn(`⚠️ Xicon 图标 "${a}" 未找到，可用图标:`,Object.keys(na)),e||null}(a)}const ca=async a=>{try{const t=new URL(a).hostname;if(ua.has(t))return ua.get(t);const s=`https://www.google.com/s2/favicons?domain=${t}&sz=64`;try{if(await ha(s))return ua.set(t,s),s}catch(e){}return null}catch(e){return console.warn(`⚠️ 获取图标失败: ${a}`,e),null}},ra=[];let la=0;const ua=new Map,da=new Map,ha=async a=>{const e=da.get(a);return e&&Date.now()-e.timestamp<3e5?e.available:(async a=>new Promise((e,t)=>{const s=async()=>{la++;try{const t=await a();e(t)}catch(s){t(s)}finally{if(la--,ra.length>0){const a=ra.shift();a&&a()}}};la<5?s():ra.push(s)}))(async()=>{try{const e=new AbortController,t=setTimeout(()=>e.abort(),1e3),s=await fetch(a,{method:"HEAD",signal:e.signal,cache:"no-cache"});clearTimeout(t);const o=s.ok;return da.set(a,{available:o,timestamp:Date.now()}),o}catch(e){return da.set(a,{available:!1,timestamp:Date.now()}),!1}})},fa=(a,e)=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(a).hostname}&sz=64&default=1`}catch(t){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iOCIgZmlsbD0iIzMzNzNkYyIvPgo8cGF0aCBkPSJNMjQgMjBIMzJWMjRIMjRWMjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQgMjhIMzJWMzJIMjRWMjhaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQgMzZIMzJWNEEyNEgzNloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="}},ma={class:"auto-icon"},va=["src","alt"],ga=sa($({__name:"AutoIcon",props:{url:{},name:{},fallbackIcon:{default:""},size:{default:64}},setup(a){H(a=>({v39d0e3f0:s.value?1:0}));const e=a,t=Q(""),s=Q(!0),o=Q(!1),n=R(()=>{const a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return a[e.name.charCodeAt(0)%a.length]}),i=R(()=>e.name.charAt(0).toUpperCase()),c=new Map,r=()=>{o.value=!0,t.value.includes("google.com/s2/favicons")||t.value.startsWith("data:")||(t.value=fa(e.url))},l=()=>{o.value=!1,s.value=!1};return q(()=>{(async()=>{try{s.value=!0,o.value=!1;const a=`${e.url}-${e.fallbackIcon}`;if(c.has(a))return t.value=c.get(a),void(s.value=!1);if(e.fallbackIcon&&!e.fallbackIcon.startsWith("xicon:")&&!e.fallbackIcon.startsWith("fa:"))return t.value=e.fallbackIcon,void c.set(a,e.fallbackIcon);if(!e.fallbackIcon||""===e.fallbackIcon.trim()){const s=fa(e.url,e.name);return t.value=s,void c.set(a,s)}const n=await Promise.race([ca(e.url),new Promise(a=>setTimeout(()=>a(null),3e3))]);if(n)t.value=n,c.set(a,n);else{const s=fa(e.url,e.name);t.value=s,c.set(a,s)}}catch(a){o.value=!0;const s=fa(e.url,e.name);t.value=s,c.set(`${e.url}-${e.fallbackIcon}`,s)}finally{s.value=!1}})()}),(e,s)=>(U(),T("div",ma,[t.value?(U(),T("img",{key:0,src:t.value,alt:`${a.name} icon`,class:"icon-image",onError:r,onLoad:l},null,40,va)):(U(),T("div",{key:1,class:"icon-placeholder",style:Y({backgroundColor:n.value})},O(i.value),5))]))}}),[["__scopeId","data-v-f342b8e2"]]),ya={mode:2,services:["direct","clearbit","google","duckduckgo","iconhorse","simple","iconify","iconfont"],customSources:["https://raw.githubusercontent.com/GWen124/HD-Icons/main/border-radius/","https://cdn.jsdelivr.net/gh/GWen124/HD-Icons@main/border-radius/"],icon:{size:64,shapePriority:["square","round","any"],qualityPriority:["hd","normal","any"],cache:!0,cacheExpiry:24},fallback:{showInitials:!0,backgroundColor:"",textColor:"#ffffff"},debug:{enableLogging:!1,showLoadingState:!0}},pa=Q(ya),Ia=Q(!1),ba=async()=>{try{const{appConfig:a}=await oa(async()=>{const{appConfig:a}=await import("./index-CmYh-SVC.js").then(a=>a.g);return{appConfig:a}},__vite__mapDeps([0,1,2,3]),import.meta.url);if(a&&a.autoIcon&&a.autoIcon.mode){const e=a.autoIcon.mode;if(1===e||2===e||3===e)return{mode:e,services:["clearbit","google","duckduckgo","iconhorse","simple","iconify","iconfont","direct"],customSources:ya.customSources,icon:ya.icon,fallback:ya.fallback,debug:ya.debug}}}catch(a){}return{mode:2,services:["clearbit","google","duckduckgo","simple","iconify","iconfont","direct"],icon:{size:64,shapePriority:["square","round","any"],qualityPriority:["hd","normal","any"],cache:!0,cacheExpiry:24},fallback:{showInitials:!0,backgroundColor:"",textColor:"#ffffff"},debug:{enableLogging:!1,showLoadingState:!0}}},ka=a=>!(!a||""===a.trim())&&(!(!a.startsWith("http://")&&!a.startsWith("https://"))||(!!(a.startsWith("/")||a.startsWith("./")||a.startsWith("../"))||(!!a.startsWith("data:")||(!(!a.startsWith("xicon:")&&!a.startsWith("fa:"))||(!!(a.startsWith("fa")||a.startsWith("fas")||a.startsWith("fab")||a.startsWith("far"))||a.length<=4&&!a.includes(":")&&!a.includes("/")&&!a.includes("."))))));R(()=>!Ia.value),R(()=>{switch(pa.value.mode){case 1:return"强制所有网站自动获取图标";case 2:return"网站图标为空时自动获取";case 3:return"非链接或本地图标自动获取";default:return"未知模式"}});const wa=["href"],Wa={class:"site-icon"},Ca=["src","alt"],Ma={key:3,class:"emoji-icon"},ja={key:4,class:"text-icon"},Da={class:"site-name"},Sa=sa($({__name:"SiteCard",props:{site:{},searchQuery:{},useAutoIcon:{type:Boolean,default:void 0}},setup(a){const e=a,t=Q(!1);q(async()=>{await(async()=>{try{Ia.value=!0;const a=await ba();return pa.value={...ya,...a},pa.value}catch(a){return ya}finally{Ia.value=!1}})(),t.value=!0});const s=R(()=>!!t.value&&(void 0!==e.useAutoIcon?e.useAutoIcon:(a=>{switch(pa.value.mode){case 1:return!0;case 2:return!a.icon||""===a.icon.trim();case 3:return!ka(a.icon);default:return a.autoIcon||!1}})(e.site))),o=R(()=>e.site.icon.startsWith("http")),n=R(()=>o.value?e.site.icon.replace(/ /g,"%20"):e.site.icon),i=R(()=>{return(a=e.site.icon).startsWith("xicon:")||a.startsWith("fa:");var a}),c=R(()=>e.site.icon.startsWith("fa")||e.site.icon.startsWith("fas")||e.site.icon.startsWith("fab")||e.site.icon.startsWith("far")),r=R(()=>e.site.icon.length<=4&&!e.site.icon.startsWith("http")&&!e.site.icon.includes(":")&&!e.site.icon.startsWith("fa")),l=R(()=>{if(!i.value)return null;const a=function(a){return a.replace(/^(xicon:|fa:)/,"")}(e.site.icon);const t=ia(a);return t||console.warn(`❌ 无法找到 Xicon 组件: ${e.site.icon} -> ${a}`),t});return(e,t)=>(U(),T("a",{href:a.site.url,target:"_blank",rel:"noopener noreferrer",class:"site-card"},[X("div",Wa,[s.value?(U(),K(ga,{key:0,url:a.site.url,name:a.site.name,"fallback-icon":a.site.icon,size:48},null,8,["url","name","fallback-icon"])):(U(),T(V,{key:1},[o.value?(U(),T("img",{key:0,src:n.value,alt:a.site.name},null,8,Ca)):i.value&&l.value?(U(),K(aa(l.value),{key:1,size:18})):c.value?(U(),T("i",{key:2,class:ea(a.site.icon)},null,2)):r.value?(U(),T("div",Ma,O(a.site.icon),1)):(U(),T("div",ja,O(a.site.name.charAt(0).toUpperCase()),1))],64))]),X("div",Da,O(a.site.name),1)],8,wa))}}),[["__scopeId","data-v-1fdac96d"]]),Pa={class:"category-section"},Ba={class:"category-header"},_a={class:"category-title"},za={class:"sites-grid"},Aa=sa($({__name:"CategorySection",props:{category:{},searchQuery:{}},setup:a=>(e,t)=>(U(),T("div",Pa,[X("div",Ba,[X("h2",_a,O(a.category.name),1)]),X("div",za,[(U(!0),T(V,null,ta(a.category.sites,e=>(U(),K(Sa,{key:e.name,site:e,"search-query":a.searchQuery},null,8,["site","search-query"]))),128))])]))}),[["__scopeId","data-v-c8d6fba2"]]);export{Aa as default};
